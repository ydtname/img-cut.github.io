(function(t){function e(e){for(var i,a,l=e[0],s=e[1],c=e[2],d=0,m=[];d<l.length;d++)a=l[d],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&m.push(r[a][0]),r[a]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i]);h&&h(e);while(m.length)m.shift()();return n.push.apply(n,c||[]),o()}function o(){for(var t,e=0;e<n.length;e++){for(var o=n[e],i=!0,l=1;l<o.length;l++){var s=o[l];0!==r[s]&&(i=!1)}i&&(n.splice(e--,1),t=a(a.s=o[0]))}return t}var i={},r={app:0},n=[];function a(e){if(i[e])return i[e].exports;var o=i[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=t,a.c=i,a.d=function(t,e,o){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(o,i,function(e){return t[e]}.bind(null,i));return o},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var h=s;n.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"017c":function(t,e,o){"use strict";o("b0ca")},3207:function(t,e,o){},"56d7":function(t,e,o){"use strict";o.r(e);o("e260"),o("e6cf"),o("cca6"),o("a79d");var i=o("c3a1"),r=(o("7437"),o("7a23")),n=o("d899"),a={class:"row bg grayBg",style:{"padding-bottom":"60px"}},l={class:"col-md-10 offset-md-1"},s={class:"row",style:{"margin-top":"40px"}},c={class:"col-md-5",ref:"imgCutterBox",style:{height:"458px","max-width":"500px",overflow:"hidden"}},h={key:0,style:{width:"100%",height:"458px",background:"#dedede","box-sizing":"border-box",border:"1px solid #dedede"}},d={style:{width:"50%",margin:"180px auto auto auto"}},m={class:"col-md-5"},g={ref:"imgCutDownBox",class:"imgCutDownBox",style:"height:458px;"},u={class:"imgCutDownBoxContainer"},p=["src"],b={key:1,class:"imgCutDownTips"},x=["disabled","href","download"],f=["disabled"],w={class:"col-md-5 offset-md-1",style:{"margin-top":"20px"}},B={class:"card"},v={class:"card-header"},y={key:0,class:"form-group custom-control"},O={for:"fileType"};function I(t,e,o,i,n,I){var C=Object(r["resolveComponent"])("ImgCutter"),j=Object(r["resolveComponent"])("el-radio"),k=Object(r["resolveComponent"])("el-radio-group");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[Object(r["createElementVNode"])("div",a,[Object(r["createElementVNode"])("div",l,[Object(r["createElementVNode"])("div",s,[Object(r["createElementVNode"])("div",c,[n.params.isModal?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",h,[Object(r["createElementVNode"])("div",d,[Object(r["createElementVNode"])("div",{class:"btn btn-primary btn-block",onClick:e[0]||(e[0]=function(t){return I.pluginExe("handleOpen")})},Object(r["toDisplayString"])(n.params.label),1),Object(r["createElementVNode"])("div",{class:"btn btn-secondary btn-block",onClick:e[1]||(e[1]=function(){return I.forIe9&&I.forIe9.apply(I,arguments)})}," Crop remote pictures（For IE9+） ")])])):Object(r["createCommentVNode"])("",!0),n.refresh?(Object(r["openBlock"])(),Object(r["createBlock"])(C,{key:1,ref:"imgCutterModal",isNineCut:n.params.isNineCut,crossOrigin:n.params.crossOrigin,label:n.params.label,rate:n.params.rate,index:n.params.index,isModal:n.params.isModal,showChooseBtn:n.params.showChooseBtn,lockScroll:n.params.lockScroll,boxWidth:n.params.boxWidth,boxHeight:n.params.boxHeight,cutWidth:n.params.cutWidth,cutHeight:n.params.cutHeight,sizeChange:!n.params.isNineCut&&n.params.sizeChange,moveAble:!n.params.isNineCut&&n.params.moveAble,imgMove:!n.params.isNineCut&&n.params.imgMove,tool:n.params.tool,fileType:n.params.fileType,originalGraph:n.params.originalGraph,previewMode:n.params.previewMode,toolBoxOverflow:n.params.toolBoxOverflow,WatermarkText:n.params.WatermarkText,WatermarkTextFont:n.params.WatermarkTextFont,WatermarkTextColor:n.params.WatermarkTextColor,WatermarkTextX:n.params.WatermarkTextX,WatermarkTextY:n.params.WatermarkTextY,smallToUpload:n.params.smallToUpload,saveCutPosition:n.params.saveCutPosition,scaleAble:!n.params.isNineCut&&n.params.scaleAble,DoNotDisplayCopyright:!1,toolBgc:"params.toolBgc",onOnChooseImg:I.onChooseImg,onOnClearAll:I.onClearAll,onOnPrintImg:I.onPrintImg,onError:I.catchError,onCutDown:I.cutDown},Object(r["createSlots"])({open:Object(r["withCtx"])((function(){return[]})),_:2},[0==n.params.isModal?{name:"choose",fn:Object(r["withCtx"])((function(){return[]}))}:void 0,0==n.params.isModal?{name:"cancel",fn:Object(r["withCtx"])((function(){return[]}))}:void 0,0==n.params.isModal?{name:"confirm",fn:Object(r["withCtx"])((function(){return[]}))}:void 0]),1032,["isNineCut","crossOrigin","label","rate","index","isModal","showChooseBtn","lockScroll","boxWidth","boxHeight","cutWidth","cutHeight","sizeChange","moveAble","imgMove","tool","fileType","originalGraph","previewMode","toolBoxOverflow","WatermarkText","WatermarkTextFont","WatermarkTextColor","WatermarkTextX","WatermarkTextY","smallToUpload","saveCutPosition","scaleAble","onOnChooseImg","onOnClearAll","onOnPrintImg","onError","onCutDown"])):Object(r["createCommentVNode"])("",!0)],512),Object(r["createElementVNode"])("div",m,[Object(r["createElementVNode"])("div",g,[Object(r["createElementVNode"])("div",u,[n.imgSrc?(Object(r["openBlock"])(),Object(r["createElementBlock"])("img",{key:0,src:n.imgSrc,alt:""},null,8,p)):(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",b,Object(r["toDisplayString"])(t.$t("block3.title8")),1))]),Object(r["createElementVNode"])("a",{class:Object(r["normalizeClass"])("btn btn-light"+(n.imgSrc?"":" disabled")),disabled:!n.imgSrc,href:n.imgSrc,download:n.downloadName||"image.jpg",role:"button"},Object(r["toDisplayString"])(t.$t("block3.title7")),11,x),Object(r["createElementVNode"])("a",{class:"btn btn-light",disabled:!0===n.params.isModal,onClick:e[2]||(e[2]=function(t){return I.pluginExe("clearAll")})},Object(r["toDisplayString"])(t.$t("block3.title6")),9,f)],512)])])]),Object(r["createElementVNode"])("div",w,[Object(r["createElementVNode"])("div",B,[Object(r["createElementVNode"])("div",v,Object(r["toDisplayString"])(t.$t("config.title")),1),Object(r["createVNode"])(k,{modelValue:n.params.isNineCut,"onUpdate:modelValue":e[3]||(e[3]=function(t){return n.params.isNineCut=t}),style:{"margin-left":"15px"}},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(j,{label:!0,size:"large",border:""},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.$t("config.nineCut")),1)]})),_:1}),Object(r["createVNode"])(j,{label:!1,size:"large",border:""},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.$t("config.normalCut")),1)]})),_:1})]})),_:1},8,["modelValue"]),n.params.isNineCut?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",y,[Object(r["createElementVNode"])("label",O,Object(r["toDisplayString"])(t.$t("config.fileType"))+"（ fileType ）：",1),Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{style:{},onInput:e[4]||(e[4]=function(t){return I.setData(t)}),name:"fileType",type:"text","onUpdate:modelValue":e[5]||(e[5]=function(t){return n.params.fileType=t})},null,544),[[r["vModelText"],n.params.fileType]])]))])])])])}o("b0c0"),o("a4d3"),o("e01a"),o("ac1f"),o("00b4");var C=o("9224"),j=(o("b680"),function(t){return Object(r["pushScopeId"])("data-v-5d4dc5c6"),t=t(),Object(r["popScopeId"])(),t}),k={class:"toolMain"},T={key:0,class:"tool-title"},N=Object(r["createTextVNode"])(" 图片裁剪 "),M={class:"tips"},S={key:0,class:"dockBtn"},V=Object(r["createTextVNode"])(" Ratio: "),E=Object(r["createTextVNode"])(" Scale: "),W=Object(r["createTextVNode"])(" ↳ "),D=Object(r["createTextVNode"])(" ↲ "),$=Object(r["createTextVNode"])(" ↻ "),P={key:4,class:"dockBtnScrollBar"},H=Object(r["createTextVNode"])(" ⇆ "),z=Object(r["createTextVNode"])(" ⇅ "),R={class:"toolBoxControlBox"},U={class:"controlBox"},L=j((function(){return Object(r["createElementVNode"])("div",{class:"controlBoxInnerLine controlBoxInnerLineTop"},null,-1)})),A=j((function(){return Object(r["createElementVNode"])("div",{class:"controlBoxInnerLine controlBoxInnerLineBottom"},null,-1)})),F=j((function(){return Object(r["createElementVNode"])("div",{class:"controlBoxInnerLine controlBoxInnerLineLeft"},null,-1)})),q=j((function(){return Object(r["createElementVNode"])("div",{class:"controlBoxInnerLine controlBoxInnerLineRight"},null,-1)})),Y={class:"selectArea"},G={key:0},X={class:"copyright"},_={key:0,target:"_blank",href:"https://github.com/acccccccb/vue-img-cutter",rel:"nofollow"},J=["width","height"],K=["width","height"],Q={class:"i-dialog-footer",style:{height:"40px"}},Z={key:0,class:"btn btn-primary btn-primary-plain"},tt={class:"btn-group fr"},et=j((function(){return Object(r["createElementVNode"])("button",{type:"button",class:"btn btn-default"},"取消",-1)})),ot=["disabled"],it=j((function(){return Object(r["createElementVNode"])("div",{style:{clear:"both"}},null,-1)}));function rt(t,e,o,i,n,a){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[!0===o.showChooseBtn&&!0===o.isModal?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:0,onClick:e[0]||(e[0]=function(){return a.handleOpen&&a.handleOpen.apply(a,arguments)})},[Object(r["renderSlot"])(t.$slots,"openImgCutter",{},void 0,!0),Object(r["renderSlot"])(t.$slots,"open",{},void 0,!0)])):Object(r["createCommentVNode"])("",!0),t.$slots.openImgCutter||t.$slots.open||!0!==o.isModal?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createElementBlock"])("button",{key:1,type:"button",class:"btn btn-primary",onClick:e[1]||(e[1]=function(){return a.handleOpen&&a.handleOpen.apply(a,arguments)})},Object(r["toDisplayString"])(o.label),1)),Object(r["createVNode"])(r["Transition"],{name:"fade"},{default:Object(r["withCtx"])((function(){return[n.visible?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:0,class:Object(r["normalizeClass"])(!0===o.isModal?"mask vue-img-cutter":""),ref:"mask"},[n.visible?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:0,class:Object(r["normalizeClass"])(!0===o.isModal?"dialogBoxModal":"dialogBox")},[Object(r["createVNode"])(r["Transition"],{name:"fade","enter-class":"fade-in-enter","enter-active-class":"fade-in-active","leave-class":"fade-out-enter","leave-active-class":"fade-out-active"},{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("div",{ref:"dialogMainModalRef",class:Object(r["normalizeClass"])(!0===o.isModal?"dialogMainModal":"dialogMain"),style:Object(r["normalizeStyle"])("width:"+(!0===o.isModal?o.boxWidth+32:o.boxWidth)+"px")},[Object(r["createElementVNode"])("div",k,[!0===o.isModal?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",T,[N,Object(r["createElementVNode"])("span",{class:"closeIcon",onClick:e[2]||(e[2]=function(){return a.handleClose&&a.handleClose.apply(a,arguments)})},"×")])):Object(r["createCommentVNode"])("",!0),Object(r["createElementVNode"])("div",{ref:"toolBox",style:Object(r["normalizeStyle"])("height:"+o.boxHeight+"px;width:"+o.boxWidth+"px"),onMousemove:e[38]||(e[38]=function(){return a.controlBtnMouseMove&&a.controlBtnMouseMove.apply(a,arguments)}),onMouseup:e[39]||(e[39]=function(){return a.controlBtnMouseUp&&a.controlBtnMouseUp.apply(a,arguments)}),onMouseleave:e[40]||(e[40]=function(){return a.controlBtnMouseUp&&a.controlBtnMouseUp.apply(a,arguments)}),class:"toolBox"},[Object(r["withDirectives"])(Object(r["createElementVNode"])("div",M,[Object(r["createElementVNode"])("div",{class:"btn btn-warning btn-xs",onClick:e[3]||(e[3]=function(){return a.chooseImg&&a.chooseImg.apply(a,arguments)})},Object(r["toDisplayString"])(o.label),1)],512),[[r["vShow"],!n.drawImg.img&&!0===o.showChooseBtn]]),1==o.tool?Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:0,class:"dockMain",style:Object(r["normalizeStyle"])("background:"+o.toolBgc),onMouseenter:e[14]||(e[14]=function(){return a.dropImgOff&&a.dropImgOff.apply(a,arguments)})},[o.rate?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",S,[Object(r["renderSlot"])(t.$slots,"ratio",{},(function(){return[V]}),!0),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(o.rate),1)])):Object(r["createCommentVNode"])("",!0),Object(r["createElementVNode"])("div",{class:"dockBtn",onClick:e[4]||(e[4]=function(){return a.scaleReset&&a.scaleReset.apply(a,arguments)})},[Object(r["renderSlot"])(t.$slots,"scaleReset",{},(function(){return[E]}),!0),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(n.drawImg.swidth>0?(n.drawImg.width/n.drawImg.swidth).toFixed(2):"-"),1)]),!1===o.originalGraph?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:1,onClick:e[5]||(e[5]=function(t){return a.turnImg(-90)}),class:"dockBtn"},[Object(r["renderSlot"])(t.$slots,"turnLeft",{},(function(){return[W]}),!0)])):Object(r["createCommentVNode"])("",!0),!1===o.originalGraph?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:2,onClick:e[6]||(e[6]=function(t){return a.turnImg(90)}),class:"dockBtn"},[Object(r["renderSlot"])(t.$slots,"turnRight",{},(function(){return[D]}),!0)])):Object(r["createCommentVNode"])("",!0),!1===o.originalGraph?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:3,onClick:e[7]||(e[7]=function(t){return a.turnReset()}),class:"dockBtn"},[Object(r["renderSlot"])(t.$slots,"reset",{},(function(){return[$]}),!0)])):Object(r["createCommentVNode"])("",!0),!1===o.originalGraph?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",P,[Object(r["createElementVNode"])("div",{ref:"dockBtnScrollControl",onMousemove:e[8]||(e[8]=function(){return a.scrollBarControlMove&&a.scrollBarControlMove.apply(a,arguments)}),onMousedown:e[9]||(e[9]=function(){return a.scrollBarControlOn&&a.scrollBarControlOn.apply(a,arguments)}),onMouseleave:e[10]||(e[10]=function(){return a.scrollBarControlOff&&a.scrollBarControlOff.apply(a,arguments)}),onMouseup:e[11]||(e[11]=function(){return a.scrollBarControlOff&&a.scrollBarControlOff.apply(a,arguments)}),style:Object(r["normalizeStyle"])("left:"+n.rotateControl.position+"px"),class:"scrollBarControl"},null,36),1==n.rotateControl.active?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:0,class:"scrollBarText",style:Object(r["normalizeStyle"])("left:"+n.rotateControl.position+"px")},Object(r["toDisplayString"])(n.rotateImg.angle.toFixed(0)+"°"),5)):Object(r["createCommentVNode"])("",!0)])):Object(r["createCommentVNode"])("",!0),!1===o.originalGraph?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:5,onClick:e[12]||(e[12]=function(){return a.flipHorizontal&&a.flipHorizontal.apply(a,arguments)}),class:"dockBtn"},[Object(r["renderSlot"])(t.$slots,"flipHorizontal",{},(function(){return[H]}),!0)])):Object(r["createCommentVNode"])("",!0),!1===o.originalGraph?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:6,onClick:e[13]||(e[13]=function(){return a.flipVertically&&a.flipVertically.apply(a,arguments)}),class:"dockBtn"},[Object(r["renderSlot"])(t.$slots,"flipVertically",{},(function(){return[z]}),!0)])):Object(r["createCommentVNode"])("",!0)],36)),[[r["vShow"],n.drawImg.img&&!0!==n.dropImg.active&&1==n.controlBox.disable&&1==n.toolBox.disable]]):Object(r["createCommentVNode"])("",!0),Object(r["withDirectives"])(Object(r["createElementVNode"])("div",{ref:"toolBoxControl",onMousedown:e[31]||(e[31]=function(){return a.toolBoxMouseDown&&a.toolBoxMouseDown.apply(a,arguments)}),onMouseup:e[32]||(e[32]=function(){return a.toolBoxMouseUp&&a.toolBoxMouseUp.apply(a,arguments)}),onMousemove:e[33]||(e[33]=function(){return a.toolBoxMouseMove&&a.toolBoxMouseMove.apply(a,arguments)}),onMouseleave:e[34]||(e[34]=function(){return a.toolBoxMouseLeave&&a.toolBoxMouseLeave.apply(a,arguments)}),class:"toolBoxControl",style:Object(r["normalizeStyle"])({pointerEvents:o.moveAble?"auto":"none"})},[Object(r["createElementVNode"])("div",R,[Object(r["createElementVNode"])("div",U,[L,A,F,q,Object(r["createElementVNode"])("div",Y," 宽:"+Object(r["toDisplayString"])(a.showToolBoxWidth)+" 高:"+Object(r["toDisplayString"])(a.showToolBoxHeight)+" (x:"+Object(r["toDisplayString"])(a.showToolBoxX)+",y:"+Object(r["toDisplayString"])(a.showToolBoxY)+") ",1),!0===o.sizeChange?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:0,"data-name":"leftUp",onMousedown:e[15]||(e[15]=function(t){return a.controlBtnMouseDown(t,"leftUp")}),class:"leftUp controlBtn"},null,32)):Object(r["createCommentVNode"])("",!0),!0===o.sizeChange?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:1,"data-name":"leftDown",onMousedown:e[16]||(e[16]=function(t){return a.controlBtnMouseDown(t,"leftDown")}),class:"leftDown controlBtn"},null,32)):Object(r["createCommentVNode"])("",!0),!0===o.sizeChange?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:2,"data-name":"rightUp",onMousedown:e[17]||(e[17]=function(t){return a.controlBtnMouseDown(t,"rightUp")}),class:"rightUp controlBtn"},null,32)):Object(r["createCommentVNode"])("",!0),!0===o.sizeChange?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:3,"data-name":"rightDown",onMousedown:e[18]||(e[18]=function(t){return a.controlBtnMouseDown(t,"rightDown")}),class:"rightDown controlBtn"},null,32)):Object(r["createCommentVNode"])("",!0),!0===o.sizeChange&&!o.rate&&n.toolBox.width>20?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:4,"data-name":"topCenter",onMousedown:e[19]||(e[19]=function(t){return a.controlBtnMouseDown(t,"topCenter")}),class:"topCenter controlBtn"},null,32)):Object(r["createCommentVNode"])("",!0),!0===o.sizeChange&&!o.rate&&n.toolBox.width>20?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:5,"data-name":"downCenter",onMousedown:e[20]||(e[20]=function(t){return a.controlBtnMouseDown(t,"downCenter")}),class:"downCenter controlBtn"},null,32)):Object(r["createCommentVNode"])("",!0),!0===o.sizeChange&&!o.rate&&n.toolBox.height>20?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:6,"data-name":"leftCenter",onMousedown:e[21]||(e[21]=function(t){return a.controlBtnMouseDown(t,"leftCenter")}),class:"leftCenter controlBtn"},null,32)):Object(r["createCommentVNode"])("",!0),!0===o.sizeChange&&!o.rate&&n.toolBox.height>20?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:7,"data-name":"rightCenter",onMousedown:e[22]||(e[22]=function(t){return a.controlBtnMouseDown(t,"rightCenter")}),class:"rightCenter controlBtn"},null,32)):Object(r["createCommentVNode"])("",!0)]),o.isNineCut?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",G,[Object(r["createElementVNode"])("div",{ref:"borderTop","data-name":"borderTop",onMouseup:e[23]||(e[23]=function(t){return a.controlBtnMouseUp(t,"borderTop")}),onMousedown:e[24]||(e[24]=function(t){return a.controlBtnMouseDown(t,"borderTop")}),class:"toolBoxControlLine toolBoxControlLineItem-1"},null,544),Object(r["createElementVNode"])("div",{ref:"borderBottom","data-name":"borderBottom",onMouseup:e[25]||(e[25]=function(t){return a.controlBtnMouseUp(t,"borderBottom")}),onMousedown:e[26]||(e[26]=function(t){return a.controlBtnMouseDown(t,"borderBottom")}),class:"toolBoxControlLine toolBoxControlLineItem-2"},null,544),Object(r["createElementVNode"])("div",{ref:"borderLeft","data-name":"borderLeft",onMouseup:e[27]||(e[27]=function(t){return a.controlBtnMouseUp(t,"borderLeft")}),onMousedown:e[28]||(e[28]=function(t){return a.controlBtnMouseDown(t,"borderLeft")}),class:"toolBoxControlLine toolBoxControlLineItem-3"},null,544),Object(r["createElementVNode"])("div",{ref:"borderRight","data-name":"borderRight",onMouseup:e[29]||(e[29]=function(t){return a.controlBtnMouseUp(t,"borderRight")}),onMousedown:e[30]||(e[30]=function(t){return a.controlBtnMouseDown(t,"borderRight")}),class:"toolBoxControlLine toolBoxControlLineItem-4"},null,544)])):Object(r["createCommentVNode"])("",!0)])],36),[[r["vShow"],null!=n.drawImg.img]]),Object(r["createElementVNode"])("div",X,[o.DoNotDisplayCopyright?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createElementBlock"])("a",_," vue-img-cutter "+Object(r["toDisplayString"])(n.version),1))]),Object(r["createElementVNode"])("canvas",{class:"canvasSelectBox",ref:"canvasSelectBox",width:o.boxWidth,onMousedown:e[35]||(e[35]=function(){return a.dropImgOn&&a.dropImgOn.apply(a,arguments)}),onMouseup:e[36]||(e[36]=function(){return a.dropImgOff&&a.dropImgOff.apply(a,arguments)}),onMousemove:e[37]||(e[37]=function(){return a.dropImgMove&&a.dropImgMove.apply(a,arguments)}),height:o.boxHeight},null,40,J),Object(r["createElementVNode"])("canvas",{class:"canvas",ref:"canvas",width:o.boxWidth,height:o.boxHeight},null,8,K)],36)]),Object(r["createElementVNode"])("div",Q,[Object(r["createElementVNode"])("input",{onChange:e[41]||(e[41]=function(){return a.putImgToCanv&&a.putImgToCanv.apply(a,arguments)}),ref:"inputFile",type:"file",accept:"image/gif, image/jpeg ,image/png",style:{width:"1px",height:"1px",border:"none",opacity:"0"}},null,544),Object(r["createElementVNode"])("span",{onClick:e[42]||(e[42]=function(){return a.chooseImg&&a.chooseImg.apply(a,arguments)})},[Object(r["renderSlot"])(t.$slots,"choose",{},(function(){return[!0===o.showChooseBtn?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Z,Object(r["toDisplayString"])(o.label),1)):Object(r["createCommentVNode"])("",!0)]}),!0)]),Object(r["createElementVNode"])("div",tt,[Object(r["createElementVNode"])("span",{onClick:e[43]||(e[43]=function(){return a.handleClose&&a.handleClose.apply(a,arguments)})},[Object(r["renderSlot"])(t.$slots,"cancel",{},(function(){return[et]}),!0)]),Object(r["createElementVNode"])("span",{onClick:e[44]||(e[44]=function(t){return a.cropPicture(!1)})},[Object(r["renderSlot"])(t.$slots,"confirm",{},(function(){return[Object(r["createElementVNode"])("button",{type:"button",class:"btn btn-primary",style:{"margin-left":"15px"},disabled:!n.drawImg.img}," 确定 ",8,ot)]}),!0)])])])],6)]})),_:3}),it],2)):Object(r["createCommentVNode"])("",!0)],2)):Object(r["createCommentVNode"])("",!0)]})),_:3})])}var nt=o("5530"),at=o("53ca"),lt=(o("a9e3"),o("d3b7"),o("1276"),o("466d"),o("5cc6"),o("907a"),o("9a8c"),o("a975"),o("735e"),o("c1ac"),o("d139"),o("3a7b"),o("d5d6"),o("82f8"),o("e91f"),o("60bd"),o("5f96"),o("3280"),o("3fcc"),o("ca91"),o("25a1"),o("cd26"),o("3c5d"),o("2954"),o("649e"),o("219c"),o("170b"),o("b39a"),o("72f7"),o("4ec9"),o("3ca3"),o("ddb0"),{name:"ImgCutter",props:{isNineCut:{type:Boolean,default:!1,required:!1},crossOrigin:{type:Boolean,default:!1,required:!1},crossOriginHeader:{type:String,default:"*",required:!1},label:{type:String,default:"选择图片",required:!1},isModal:{type:Boolean,default:!0,required:!1},lockScroll:{type:Boolean,default:!0,required:!1},showChooseBtn:{type:Boolean,default:!0,required:!1},boxWidth:{type:Number,default:800,required:!1},boxHeight:{type:Number,default:400,required:!1},cutWidth:{type:Number,default:200,required:!1},cutHeight:{type:Number,default:200,required:!1},rate:{type:String,default:null,required:!1},tool:{type:Boolean,default:!0,required:!1},toolBgc:{type:String,default:"#fff",required:!1},imgMove:{type:Boolean,default:!0,required:!1},sizeChange:{type:Boolean,default:!0,required:!1},originalGraph:{type:Boolean,default:!1,required:!1},moveAble:{type:Boolean,default:!0,required:!1},previewMode:{type:Boolean,default:!0,required:!1},CuttingOriginal:{type:Boolean,default:!1,required:!1},WatermarkText:{type:String,default:"",required:!1},WatermarkTextFont:{type:String,default:"12px Sans-serif",required:!1},WatermarkTextColor:{type:String,default:"#fff",required:!1},WatermarkTextX:{type:Number,default:.95,required:!1},WatermarkTextY:{type:Number,default:.95,required:!1},smallToUpload:{type:Boolean,default:!1,required:!1},saveCutPosition:{type:Boolean,default:!1,required:!1},scaleAble:{type:Boolean,default:!0,required:!1},index:{default:null,required:!1},fileType:{default:"png",required:!1,type:String},toolBoxOverflow:{type:Boolean,default:!0,required:!1},DoNotDisplayCopyright:{type:Boolean,default:!1,required:!1},quality:{type:Number,default:1,required:!1}},model:["label","boxWidth","boxHeight","rate","tool","DoNotDisplayCopyright"],data:function(){var t,e;return t=this.boxWidth/2,e=this.boxHeight/2,{version:"",visible:!1,fileName:"",cutImageObj:null,onPrintImgTimmer:null,toolBoxPosition:{x:0,y:0},drawImg:{img:null,sx:0,sy:0,swidth:0,sheight:0,x:0,y:0,width:0,height:0},toolBox:{disable:!0,width:t,height:e,x:0,y:0,boxMove:{start:{x:0,y:0},moveTo:{x:0,y:0}}},dropImg:{active:!1,pageX:0,pageY:0,params:{}},rotateImg:{angle:0},rotateControl:{active:!1,start:{x:0,y:0},position:100},scaleImg:{rate:0,params:{}},controlBox:{disable:!0,btnName:"",start:{x:0,y:0,width:0,height:0,top:0,bottom:0,left:0,right:0}},controlBorder:{disable:!0,btnName:"",start:{x:0,y:0}},selectBox:!1,selectBoxColor:"rgba(0,0,0,0.6)",isFlipHorizontal:!1,isFlipVertically:!1}},mounted:function(){var t=this;this.version=C.version,!1===this.isModal&&(this.visible=!0,this.$nextTick((function(){t.$refs["toolBox"]&&(t.$refs["toolBox"].onmousewheel=t.scaleImgWheel,t.$refs["toolBox"].addEventListener("DOMMouseScroll",t.scaleImgWheel))})))},methods:{handleOpen:function(t){var e=this,o=function(t){if(e.$refs["toolBox"]&&(e.$refs["toolBox"].onmousewheel=e.scaleImgWheel,e.$refs["toolBox"].addEventListener("DOMMouseScroll",e.scaleImgWheel)),!0===e.isModal){!0===e.lockScroll&&(document.body.style.overflowY="hidden");var o=e.$refs["dialogMainModalRef"].offsetHeight+200,i=window.innerHeight,r=e.$refs["mask"];r.style.overflowY=o>i?"scroll":"hidden"}t&&"function"===typeof t&&t()};if(t&&"object"==Object(at["a"])(t)&&t.src){if(!t.name)throw new Error("传入参数必须包含：src,name");var i=new Image;!0===this.crossOrigin&&(i.crossOrigin=this.crossOriginHeader),i.name=t.name,i.style.position="fixed",i.style.top="-5000px",i.style.opacity=0,i.onerror=function(t){console.error("图片加载失败"),e.$emit("error",{index:e.index,event:t,msg:"图片加载失败"}),e.clearCutImageObj()},i.onload=function(){if(!0!==i.complete)throw new Error("图片加载失败");e.visible=!0,e.$nextTick((function(){o((function(){e.importImgToCanv(i)}))}))},i.src=t.src,this.cutImageObj=i,document.body.appendChild(i),this.$emit("onChooseImg",t,this.index)}else this.visible=!0,this.$nextTick((function(){o()}))},handleClose:function(){var t=this;this.clearAll(),!0===this.isModal&&(!0===this.lockScroll&&(document.body.style.overflowY="scroll"),this.$nextTick((function(){t.visible=!1})))},chooseImg:function(){this.$refs["inputFile"].click()},importImgToCanv:function(t){var e,o=t.height,i=t.width,r=this.boxWidth,n=this.boxHeight,a=Object(nt["a"])({},this.drawImg);this.fileName=t.name,a.img=t,this.scaleImg.rate=i/o,o<n&&i<r?(e=1,a.x=(r-i)/2,a.y=(n-o)/2):i/o<=r/n?(e=n/o,a.x=(r-i*e)/2):(e=r/i,a.y=(n-o*e)/2),a.swidth=i,a.sheight=o,a.width=i*e,a.height=o*e,a.x=(r-a.width)/2,a.y=(n-a.height)/2,this.drawImg=a,this.printImg(),this.putToolBox()},putImgToCanv:function(t){var e,o=this;if(!t.target.files)return console.error("IE9及以下需要自己传入image对象"),!1;if(e=t.target.files[0]||null,e){this.fileName=e.name;var i=new FileReader;i.readAsDataURL(e),i.onload=function(t){var r=t.target.result,n=document.createElement("img");n.src=r;var a=setInterval((function(){if(2===i.readyState){if(clearInterval(a),!o.isNineCut&&!o.sizeChange&&o.smallToUpload&&n.width<=o.cutWidth&&n.height<=o.cutHeight)return o.handleClose(),e.name=o.changeFileName(e.name,o.fileType),void o.$emit("cutDown",{filename:o.changeFileName(e.name,o.fileType),file:e,index:o.index});var t,r=n.height,l=n.width,s=o.boxWidth,c=o.boxHeight,h=Object(nt["a"])({},o.drawImg);h.img=n,o.scaleImg.rate=l/r,r<c&&l<s?(t=1,h.x=(s-l)/2,h.y=(c-r)/2):l/r<=s/c?(t=c/r,h.x=(s-l*t)/2):(t=s/l,h.y=(c-r*t)/2),h.swidth=l,h.sheight=r,h.width=l*t,h.height=r*t,h.x=(s-h.width)/2,h.y=(c-h.height)/2,o.drawImg=h,o.printImg(),o.putToolBox()}}),200)},this.$emit("onChooseImg",e,this.index)}},putToolBox:function(){var t=this;this.toolBox.width!==this.boxWidth/2&&this.toolBox.height!==this.boxHeight/2&&!1!==this.saveCutPosition||(this.toolBox.width=this.cutWidth>this.boxWidth?this.boxWidth:this.cutWidth,this.toolBox.height=this.cutHeight>this.boxHeight?this.boxHeight:this.cutHeight),(0===this.toolBox.x&&0===this.toolBox.y||!1===this.saveCutPosition)&&(this.toolBox.x=this.boxWidth/2-this.toolBox.width/2,this.toolBox.y=this.boxHeight/2-this.toolBox.height/2),this.checkToolBoxOverflow().then((function(){t.printImg()})),this.isNineCut?this.drawControlBox(this.drawImg.width,this.drawImg.height,this.drawImg.x,this.drawImg.y):this.drawControlBox(this.toolBox.width,this.toolBox.height,this.toolBox.x,this.toolBox.y)},checkToolBoxOverflow:function(){var t=this;return new Promise((function(e){if(!t.toolBoxOverflow){if(t.drawImg.width<t.toolBox.width||t.drawImg.height<t.toolBox.height){var o=t.drawImg.width/t.drawImg.height;t.drawImg.width<t.toolBox.width&&(t.drawImg.width=t.toolBox.width,t.drawImg.height=t.drawImg.width/o),t.drawImg.height<t.toolBox.height&&(t.drawImg.height=t.toolBox.height,t.drawImg.width=t.drawImg.height*o),t.drawImg.x=(t.boxWidth-t.drawImg.width)/2,t.drawImg.y=(t.boxHeight-t.drawImg.height)/2}console.log("this.drawImg.y > this.toolBox.y",t.drawImg.y+t.drawImg.height,t.toolBox.y+t.toolBox.height),t.drawImg.x>t.toolBox.x&&(t.drawImg.x=t.toolBox.x),t.drawImg.x+t.drawImg.width<t.toolBox.x+t.toolBox.width&&(t.drawImg.x=t.toolBox.x+t.toolBox.width-t.drawImg.width),t.drawImg.y>t.toolBox.y&&(t.drawImg.y=t.toolBox.y),t.drawImg.y+t.drawImg.height<t.toolBox.y+t.toolBox.height&&(t.drawImg.y=t.toolBox.y+t.toolBox.height-t.drawImg.height)}e()}))},isSupportFileApi:function(){return!!(window.File&&window.FileList&&window.FileReader&&window.Blob&&-1===navigator.userAgent.indexOf("Edge")&&-1===navigator.userAgent.indexOf("MSIE")&&-1===navigator.userAgent.indexOf("Trident"))},dataURLtoFile:function(t,e){var o=t.split(","),i=o[0].match(/:(.*?);/),r=i?i[1]:"image/png",n=atob(o[1]),a=new Uint8Array(l),l=n.length;while(l--)a[l]=n.charCodeAt(l);if(this.isSupportFileApi()){var s=new File([a],e,{type:r});return s}return"不支持File对象"},clearAll:function(){var t=this,e=t.$refs["canvas"],o=e.getContext("2d");o.clearRect(0,0,e.width,e.height);var i=t.$refs["canvasSelectBox"],r=i.getContext("2d");r.clearRect(0,0,i.width,i.height);var n=t.drawImg.sx,a=t.drawImg.sy;this.drawImg={img:null,sx:n,sy:a,swidth:0,sheight:0,x:0,y:0,width:0,height:0},this.isNineCut&&(this.$refs["borderLeft"].style.left="0px",this.$refs["borderRight"].style.right="0px",this.$refs["borderTop"].style.top="0px",this.$refs["borderBottom"].style.bottom="0px",this.controlBox.start.left=0,this.controlBox.start.right=0,this.controlBox.start.top=0,this.controlBox.start.bottom=0),this.isFlipHorizontal=!1,this.isFlipVertically=!1,this.$refs["inputFile"].value="",this.rotateImg.angle=0,this.drawImg.img=null,this.turnReset(),this.clearCutImageObj(),this.$emit("onClearAll",this.index)},clearCutImageObj:function(){null!==this.cutImageObj&&void 0!==this.cutImageObj&&("function"===typeof this.cutImageObj.remove?this.cutImageObj.remove():this.cutImageObj.removeNode()),this.cutImageObj=null},drawControlBox:function(t,e,o,i){var r=this;this.toolBoxOverflow||(t<1&&(t=1),e<1&&(e=1),t>this.drawImg.width&&(t=this.drawImg.width),e>this.drawImg.height&&(e=this.drawImg.height),o<this.drawImg.x&&(o=this.drawImg.x),i<this.drawImg.y&&(i=this.drawImg.y),o>this.drawImg.x+this.drawImg.width-t&&(o=this.drawImg.x+this.drawImg.width-t),i>this.drawImg.y+this.drawImg.height-e&&(i=this.drawImg.y+this.drawImg.height-e)),t>this.boxWidth&&(t=this.boxWidth),e>this.boxHeight&&(e=this.boxHeight),o<0&&(o=0),i<0&&(i=0);var n,a,l=this.$refs["toolBoxControl"],s=this.$refs["canvasSelectBox"],c=s.getContext("2d");if(c.fillStyle=this.selectBoxColor,c.clearRect(0,0,s.width,s.height),c.fillRect(0,0,s.width,s.height),this.rate&&""!==this.rate){var h=this.rate.split(":")[0]/this.rate.split(":")[1];h>=1?(n=t,a=t/h,a+i>this.drawImg.y+this.drawImg.height&&(a=this.drawImg.y+this.drawImg.height-i,n=a*h)):(n=e*h,a=e)}else n=t,a=e;this.toolBox.width=Math.abs(n),this.toolBox.height=Math.abs(a),l.style.width=Math.abs(n)+"px",l.style.height=Math.abs(a)+"px",this.toolBox.boxMove.moveTo.x=o,this.toolBox.boxMove.moveTo.y=i,n<0&&(o+=n),a<0&&(i+=a),o+this.toolBox.width>this.boxWidth&&(o=this.boxWidth-this.toolBox.width),o<0&&(o=0),i+this.toolBox.height>this.boxHeight&&(i=this.boxHeight-this.toolBox.height),i<0&&(i=0),this.toolBoxPosition.x=o,this.toolBoxPosition.y=i,l.style.left=o+"px",l.style.top=i+"px",c.clearRect(o,i,Math.abs(n),Math.abs(a)),this.onPrintImgTimmer&&clearTimeout(this.onPrintImgTimmer),this.onPrintImgTimmer=setTimeout((function(){r.cropPicture(!0)}),100)},resetToolBox:function(){this.toolBox.width<0&&(this.toolBox.boxMove.moveTo.x=this.toolBox.x-this.toolBox.width),this.toolBox.height<0&&(this.toolBox.boxMove.moveTo.y=this.toolBox.y-this.toolBox.height),this.toolBox.width=Math.abs(this.toolBox.width),this.toolBox.height=Math.abs(this.toolBox.height)},toolBoxMouseDown:function(t){var e=this.$refs["toolBoxControl"];this.toolBox.x=parseInt(e.style.left.split("px")[0]),this.toolBox.y=parseInt(e.style.top.split("px")[0]),this.toolBox.disable=!1,this.dropImg.active=!1,this.toolBox.boxMove.start={x:t.pageX,y:t.pageY}},toolBoxMouseMove:function(t){if(this.dropImg.active&&this.dropImgMove(t),!1===this.toolBox.disable&&!0===this.moveAble){var e=t.pageX-this.toolBox.boxMove.start.x,o=t.pageY-this.toolBox.boxMove.start.y,i=this.toolBox.x+e,r=this.toolBox.y+o;this.drawControlBox(this.toolBox.width,this.toolBox.height,i,r)}},toolBoxMouseLeave:function(){var t=this;this.toolBox.disable=!0,this.onPrintImgTimmer&&clearTimeout(this.onPrintImgTimmer),this.onPrintImgTimmer=setTimeout((function(){t.cropPicture(!0)}),100),this.resetToolBox()},toolBoxMouseUp:function(){this.toolBox.x=parseInt(this.toolBoxPosition.x),this.toolBox.y=parseInt(this.toolBoxPosition.y),this.toolBox.disable=!0,this.dropImg.active=!1,this.resetToolBox()},printImg:function(){var t=this;if(this.drawImg.img){var e=this.$refs["canvas"],o=e.getContext("2d");o.font="18px bold 黑体",o.fillStyle="#ff0",o.textAlign="center",o.textBaseline="middle",o.save(),o.clearRect(0,0,e.width,e.height),o.translate(this.drawImg.x+this.drawImg.width/2,this.drawImg.y+this.drawImg.height/2),o.rotate(this.rotateImg.angle*Math.PI/180),o.translate(-(this.drawImg.x+this.drawImg.width/2),-(this.drawImg.y+this.drawImg.height/2)),o.translate(this.drawImg.x,this.drawImg.y),o.scale(this.isFlipHorizontal?-1:1,this.isFlipVertically?-1:1),o.drawImage(this.drawImg.img,this.drawImg.sx,this.drawImg.sy,this.drawImg.swidth,this.drawImg.sheight,this.isFlipHorizontal?-this.drawImg.width:0,this.isFlipVertically?-this.drawImg.height:0,this.drawImg.width,this.drawImg.height),o.translate(-this.drawImg.x,this.drawImg.y),o.restore(),this.onPrintImgTimmer&&clearTimeout(this.onPrintImgTimmer),this.onPrintImgTimmer=setTimeout((function(){t.cropPicture(!0)}),100),this.$parent.downloadName=this.changeFileName(this.fileName,this.fileType)}},dropImgOn:function(t){!0===this.imgMove&&(this.dropImg.active=!0,this.dropImg.params=Object(nt["a"])({},this.drawImg),this.dropImg.pageX=t.pageX,this.dropImg.pageY=t.pageY)},dropImgOff:function(){var t=this;this.dropImg.active=!1,this.onPrintImgTimmer&&clearTimeout(this.onPrintImgTimmer),this.onPrintImgTimmer=setTimeout((function(){t.cropPicture(!0)}),100)},dropImgMove:function(t){if(this.dropImg.active&&this.drawImg.img){var e=Object(nt["a"])({},this.drawImg);e.x=this.dropImg.params.x-(this.dropImg.pageX-t.pageX),e.y=this.dropImg.params.y-(this.dropImg.pageY-t.pageY),this.toolBoxOverflow||(e.x>this.toolBox.x&&(e.x=this.toolBox.x),e.x<this.toolBox.x+this.toolBox.width-e.width&&(e.x=this.toolBox.x+this.toolBox.width-e.width),e.y>this.toolBox.y&&(e.y=this.toolBox.y),e.y<this.toolBox.y+this.toolBox.height-e.height&&(e.y=this.toolBox.y+this.toolBox.height-e.height)),this.drawImg=e,this.printImg(),t.stopPropagation()}},scaleReset:function(){this.drawImg.width=this.drawImg.swidth,this.drawImg.height=this.drawImg.sheight,this.printImg()},scaleImgWheel:function(t){var e=this;if(this.drawImg.img&&!0===this.scaleAble){var o,i=t||window.event;i.wheelDelta?o=-i.wheelDelta/40:i.detail&&(o=i.detail);var r=50;this.drawImg.x=this.drawImg.width-9*o>r?this.drawImg.x+3*o:this.drawImg.x,this.drawImg.y=this.drawImg.width-9*o>r?this.drawImg.y+3*o:this.drawImg.y,this.drawImg.width=this.drawImg.width-9*o>r?this.drawImg.width-9*o:r,this.drawImg.height=this.drawImg.width/this.scaleImg.rate,this.checkToolBoxOverflow().then((function(){e.printImg(),e.onPrintImgTimmer&&clearTimeout(e.onPrintImgTimmer),e.onPrintImgTimmer=setTimeout((function(){e.cropPicture(!0)}),100)}))}return t.preventDefault(),t.returnValue=!1,!1},flipHorizontal:function(){this.drawImg.img&&(0==this.isFlipHorizontal?this.isFlipHorizontal=!0:this.isFlipHorizontal=!1,this.printImg())},flipVertically:function(){this.drawImg.img&&(0==this.isFlipVertically?this.isFlipVertically=!0:this.isFlipVertically=!1,this.printImg())},turnImg:function(t){var e=this.rotateImg.angle,o=e+t;o>=-180&&o<=180&&(this.rotateImg.angle=o,this.rotateControl.position=o/180*100+100,this.printImg("rotate"))},turnReset:function(){this.rotateImg.angle=0,this.rotateControl.position=100,this.printImg("rotate")},controlBtnMouseDown:function(t,e){this.controlBox.disable=!1,this.controlBox.btnName=e;var o=this.getBorderDir(e);o&&(this.controlBox.start[o]=parseInt(t.target.style[o]||0,10)),this.controlBox.start.x=t.clientX,this.controlBox.start.y=t.clientY,this.controlBox.start.width=this.toolBox.width,this.controlBox.start.height=this.toolBox.height,t.stopPropagation()},controlBtnMouseUp:function(t,e){this.controlBox.disable=!0;var o=this.getBorderDir(e);o&&(this.controlBox.start[o]=parseInt(t.target.style[o]||0,10)),this.dropImgOff(),this.resetToolBox(),this.toolBoxMouseUp(),t.stopPropagation()},getBorderDir:function(t){var e=new Map([["borderTop","top"],["borderBottom","bottom"],["borderLeft","left"],["borderRight","right"]]);return e.get(t)},controlBtnMouseMove:function(t){if(!1===this.controlBox.disable){var e,o,i=t.clientX-this.controlBox.start.x,r=t.clientY-this.controlBox.start.y;if(this.isNineCut){var n=0,a=this.drawImg,l=a.width,s=a.height;if("borderTop"==this.controlBox.btnName){var c=this.$refs["borderTop"];n=this.controlBox.start.top+r,n<0&&(n=0,this.controlBox.start.top=0),n>s&&(n=s-1),c.style.top="".concat(n,"px")}if("borderBottom"==this.controlBox.btnName){var h=this.$refs["borderBottom"];n=this.controlBox.start.bottom-r,n<0&&(n=0,this.controlBox.start.bottom=0),n>s&&(n=s-1),h.style.bottom="".concat(n,"px")}if("borderLeft"==this.controlBox.btnName){var d=this.$refs["borderLeft"];n=this.controlBox.start.left+i,n<0&&(n=0,this.controlBox.start.left=0),n>l&&(n=l-1),d.style.left="".concat(n,"px")}if("borderRight"==this.controlBox.btnName){var m=this.$refs["borderRight"];n=this.controlBox.start.right-i,n<0&&(n=0,this.controlBox.start.right=0),n>l&&(n=l-1),m.style.right="".concat(n,"px")}return}if("leftUp"==this.controlBox.btnName){if(this.rate){var g=this.rate.split(":")[0]/this.rate.split(":")[1];g>=1?(e=this.toolBox.x+i,o=this.toolBox.y+i/g):(e=this.toolBox.x+r*g,o=this.toolBox.y+r)}else e=this.toolBox.x+i,o=this.toolBox.y+r;this.toolBox.width=this.controlBox.start.width-i,this.toolBox.height=this.controlBox.start.height-r}if("rightUp"==this.controlBox.btnName){if(this.rate){var u=this.rate.split(":")[0]/this.rate.split(":")[1];u>=1?(e=this.toolBox.x,o=this.toolBox.y-i/u):(e=this.toolBox.x,o=this.toolBox.y+r)}else e=this.toolBox.x,o=this.toolBox.y+r;this.toolBox.width=this.controlBox.start.width+i,this.toolBox.height=this.controlBox.start.height-r}if("rightDown"==this.controlBox.btnName&&(e=this.toolBox.x,o=this.toolBox.y,this.toolBox.width=this.controlBox.start.width+i,this.toolBox.height=this.controlBox.start.height+r),"leftDown"==this.controlBox.btnName){if(this.rate){var p=this.rate.split(":")[0]/this.rate.split(":")[1];p>=1?(e=this.toolBox.x+i,o=this.toolBox.y):(e=this.toolBox.x+-r*p,o=this.toolBox.y)}else e=this.toolBox.x+i,o=this.toolBox.y;this.toolBox.width=this.controlBox.start.width-i,this.toolBox.height=this.controlBox.start.height+r}"topCenter"==this.controlBox.btnName&&(e=this.toolBox.x,o=this.toolBox.y+r,this.toolBox.width=this.controlBox.start.width,this.toolBox.height=this.controlBox.start.height-r),"downCenter"==this.controlBox.btnName&&(e=this.toolBox.x,o=this.toolBox.y,this.toolBox.width=this.controlBox.start.width,this.toolBox.height=this.controlBox.start.height+r),"leftCenter"==this.controlBox.btnName&&(e=this.toolBox.x+i,o=this.toolBox.y,this.toolBox.width=this.controlBox.start.width-i,this.toolBox.height=this.controlBox.start.height),"rightCenter"==this.controlBox.btnName&&(e=this.toolBox.x,o=this.toolBox.y,this.toolBox.width=this.controlBox.start.width+i,this.toolBox.height=this.controlBox.start.height),this.drawControlBox(this.toolBox.width,this.toolBox.height,e,o)}t.stopPropagation()},changeFileName:function(t,e){var o=t.lastIndexOf(".");return t.substr(0,o+1)+("jpeg"===e?"jpg":e)},cropPicture:function(t){var e=this;if(this.drawImg.img){var o=this.$refs["canvas"],i=new Image;!0===this.crossOrigin&&(i.crossOrigin=this.crossOriginHeader),i.src=o.toDataURL("image/".concat(this.fileType),e.quality),HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,i,r){window.atob?setTimeout((function(){for(var n,a=atob(o.toDataURL(i,r).split(",")[1]),l=a.length,s=new Uint8Array(l),c=0;c<l;c++)s[c]=a.charCodeAt(c);try{n=new Blob([s],{type:"image/".concat(e.fileType)})}catch(m){if(window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,"TypeError"==m.name&&window.BlobBuilder){var h=window.BlobBuilder,d=new h;d.append(s.buffer),n=d.getBlob("image/".concat(e.fileType))}"InvalidStateError"==m.name&&(n=new Blob([s.buffer],{type:"image/".concat(e.fileType)}))}t(n)}),200):t(!1,{type:"image/".concat(e.fileType)})}}),o.toBlob((function(o){if(o){var r=new FileReader;r.readAsDataURL(o),r.onload=function(){var o=setInterval((function(){if(2==r.readyState){clearInterval(o);var n=document.createElement("canvas"),a=n.getContext("2d");if(1==e.originalGraph){var l=e.drawImg.width/e.drawImg.swidth,s=e.toolBox.width/l,c=e.toolBox.height/l;n.width=s,n.height=c;var h=(e.toolBox.x-e.drawImg.x)/l,d=(e.toolBox.y-e.drawImg.y)/l,m=e.drawImg.swidth,g=e.drawImg.sheight;a.translate(-h,-d),a.drawImage(e.drawImg.img,0,0,m,g)}else{n.width=e.toolBox.width,n.height=e.toolBox.height;var u=e.toolBox;if(e.rate){var p=e.rate.split(":")[0]/e.rate.split(":")[1],b=e.rate.split(":")[0],x=e.rate.split(":")[1];b>=x?a.drawImage(i,u.x,u.y,u.width,u.width*p,0,0,u.width,u.width*p):a.drawImage(i,u.x,u.y,u.width,u.width/p,0,0,u.width,u.width/p)}else if(e.isNineCut){var f=e.drawImg,w=f.width,B=f.height,v=e.controlBox.start,y=v.left,O=v.right,I=v.top,C=v.bottom;if(!y&&!O&&!I&&!C)return void(e.$parent.imgSrc="");y||O?(I||(I=B/2),C||(C=B/2)):(I||C)&&(y||(y=w/2),O||(O=w/2)),n.width=y+O,n.height=I+C,a.drawImage(i,u.x,u.y,y,I,0,0,y,I),a.drawImage(i,u.x+u.width-O,u.y,O,I,y,0,O,I),a.drawImage(i,u.x,u.y+u.height-C,y,C,0,I,y,C),a.drawImage(i,u.x+u.width-O,u.y+u.height-C,O,C,y,I,O,C)}else a.drawImage(i,u.x,u.y,u.width,u.height,0,0,u.width,u.height)}n.toBlob((function(o){var i=e.changeFileName(e.fileName,e.fileType);t?e.previewMode&&e.$emit("onPrintImg",{index:e.index,fileName:i,blob:o,file:e.dataURLtoFile(n.toDataURL("image/".concat(e.fileType),e.quality),i),dataURL:n.toDataURL("image/".concat(e.fileType),e.quality)}):(e.handleClose(),e.$emit("cutDown",{index:e.index,fileName:i,blob:o,file:e.dataURLtoFile(n.toDataURL("image/".concat(e.fileType),e.quality),i),dataURL:n.toDataURL("image/".concat(e.fileType),e.quality)}))}),"image/".concat(e.fileType),e.quality)}}),200)}}else{var n=document.createElement("canvas");n.width=e.toolBox.width,n.height=e.toolBox.height;var a=n.getContext("2d"),l=e.toolBox;if(e.rate){var s=e.rate.split(":")[0]/e.rate.split(":")[1];a.drawImage(i,l.x,l.y,l.width,l.width*s,0,0,l.width,l.width*s)}else a.drawImage(i,l.x,l.y,l.width,l.height,0,0,l.width,l.height);var c=e.changeFileName(e.fileName,e.fileType);t?e.$emit("onPrintImg",{fileName:c,dataURL:n.toDataURL("image/".concat(e.fileType),e.quality)}):(e.handleClose(),e.$emit("cutDown",{fileName:c,dataURL:n.toDataURL("image/".concat(e.fileType),e.quality)}))}})),"image/".concat(e.fileType),e.quality}else t||(console.warn("No picture selected"),e.$emit("error",{err:1,msg:"No picture selected"}))},scrollBarControlMove:function(t){if(this.rotateControl.active){var e=t.pageX-this.rotateControl.start.x,o=this.rotateControl.start.position+e;o<=0&&(o=0),o>=200&&(o=200),this.rotateControl.position=o,this.rotateImg.angle=(o-100)/100*180,this.printImg()}},scrollBarControlOn:function(t){this.rotateControl.active=!0,this.rotateControl.start.x=t.pageX,this.rotateControl.start.y=t.pageY,this.rotateControl.start.position=this.rotateControl.position},scrollBarControlOff:function(){this.rotateControl.active=!1}},computed:{showToolBoxWidth:function(){var t;return t=this.originalGraph?this.toolBox.width/(this.drawImg.width/this.drawImg.swidth):this.toolBox.width,Number(t).toFixed(0)},showToolBoxHeight:function(){var t;return t=this.originalGraph?this.toolBox.height/(this.drawImg.width/this.drawImg.swidth):this.toolBox.height,Number(t).toFixed(0)},showToolBoxX:function(){var t;return t=this.toolBoxPosition.x,Number(t).toFixed(0)},showToolBoxY:function(){var t;return t=this.toolBoxPosition.y,Number(t).toFixed(0)}}}),st=(o("017c"),o("d959")),ct=o.n(st);const ht=ct()(lt,[["render",rt],["__scopeId","data-v-5d4dc5c6"]]);var dt=ht,mt={name:"App",components:{ImgCutter:dt},data:function(){return{name:"",version:"",author:"",description:"",banner:"https://i.picsum.photos/id/743/1920/500.jpg",github:"https://github.com/acccccccb/vue-img-cutter",gitee:"https://gitee.com/GLUESTICK/vue-img-cutter",download:"https://github.com/acccccccb/vue-img-cutter/archive/master.zip",cutImgSrc:"https://phpcrm-oss.oss-cn-chengdu.aliyuncs.com/weixinpay.png",homepage:"https://www.ihtmlcss.com",docs:"https://github.com/acccccccb/vue-img-cutter/blob/master/README.md",npm:"https://www.npmjs.com/package/vue-img-cutter",cutImgWidth:250,cutImgHeight:250,imgSrc:null,downloadName:"",refresh:!0,isForIe9:!1,loadImg:!1,onPrintImgTimmer:null,params:{isNineCut:!0,label:this.$t("block3.title9"),fileType:"png",crossOrigin:!0,crossOriginHeader:"*",rate:"",toolBgc:"none",isModal:!1,showChooseBtn:!0,saveCutPosition:!0,scaleAble:!1,lockScroll:!0,toolBoxOverflow:!0,quality:1,boxWidth:500,boxHeight:458,cutWidth:250,cutHeight:250,sizeChange:!0,moveAble:!0,imgMove:!0,tool:!0,originalGraph:!1,WatermarkText:"vue-img-cutter",WatermarkTextFont:"12px Sans-serif",WatermarkTextColor:"#00ff00",WatermarkTextX:.95,WatermarkTextY:.95,smallToUpload:!0,previewMode:!0,index:""},code1:"",code2:"\n// "+this.$t("block3.title4")+"\nforIe9:() => {\n   this.$refs.imgCutterModal.handleOpen({\n       name:1.png,\n       src:http://imgurl.com/1.png,\n   });\n}"}},created:function(){this.name=C.name,this.version=C.version,this.author=C.author,this.description=C.description},mounted:function(){var t=this.$refs.imgCutterBox;this.params.boxWidth=t.offsetWidth-30,this.createCode()},methods:{cutDown:function(t){console.log("cutDown"),console.log(t),this.imgSrc=t.dataURL,this.downloadName=t.fileName},forIe9:function(){this.$refs.imgCutterModal.handleOpen({name:this.cutImgSrc,src:this.cutImgSrc})},doRefresh:function(){var t=this;this.refresh=!1,this.imgSrc="",this.$nextTick((function(){t.refresh=!0}))},onClearAll:function(){this.loadImg=!1,this.imgSrc=""},onPrintImg:function(t){this.imgSrc=t.dataURL},onChooseImg:function(t){t&&(this.loadImg=!0)},createCode:function(){this.code1='\n<ImgCutter\n   ref="imgCutterModal"\n   label="'+this.params.label+'"\n   fileType="'+this.params.fileType+'"\n   :crossOrigin="'+this.params.crossOrigin+'"\n   crossOriginHeader="'+this.params.crossOriginHeader+'"\n   rate="'+this.params.rate+'"\n   toolBgc="'+this.params.toolBgc+'"\n   :isModal="'+this.params.isModal+'"\n   :showChooseBtn="'+this.params.showChooseBtn+'"\n   :lockScroll="'+this.params.lockScroll+'"\n   :boxWidth="'+this.params.boxWidth+'"\n   :boxHeight="'+this.params.boxHeight+'"\n   :cutWidth="'+this.params.cutWidth+'"\n   :cutHeight="'+this.params.cutHeight+'"\n   :sizeChange="'+this.params.sizeChange+'"\n   :moveAble="'+this.params.moveAble+'"\n   :imgMove="'+this.params.imgMove+'"\n   :originalGraph="'+this.params.originalGraph+'"\n   WatermarkText="'+this.params.WatermarkText+'"\n   WatermarkTextFont="'+this.params.WatermarkTextFont+'"\n   WatermarkTextColor="'+this.params.WatermarkTextColor+'"\n   :WatermarkTextX="'+this.params.WatermarkTextX+'"\n   :WatermarkTextY="'+this.params.WatermarkTextY+'"\n   :smallToUpload="'+this.params.smallToUpload+'"\n   :saveCutPosition="'+this.params.saveCutPosition+'"\n   :scaleAble="'+this.params.scaleAble+'"\n   :previewMode="'+this.params.previewMode+'"\n   :quality="'+this.params.quality+'"\n   :toolBoxOverflow="'+this.params.toolBoxOverflow+'"\n   :index="'+this.params.index+'"\n   @cutDown="cutDown">\n       <div class="btn btn-primary" #open>'+this.params.label+"</div>\n</ImgCutter>"},setData:function(t){function e(t){var e=/^\d+(\.\d+)?$/,o=/^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$/;return!(!e.test(t)&&!o.test(t))}var o=t.target.value;"true"==o&&(o=!0),"false"==o&&(o=!1),!0===e(o)&&(o=parseInt(o)),this.params[t.target.name]=o,this.doRefresh(),this.createCode()},catchInput:function(t){var e=t.target.value,o=t.target.name;this[o]=e},catchError:function(t){console.log(t),window.alert(t.msg)},pluginExe:function(t){this.$refs.imgCutterModal[t]()}}};o("d64a");const gt=ct()(mt,[["render",I],["__scopeId","data-v-6e6ac2f2"]]);var ut=gt,pt={"introduce.docs":"文档","introduce.gitee":"Gitee","introduce.github":"Github","introduce.npm":"Npm","introduce.download":"下载","introduce.homepage":"作者主页","banner.download":"下载压缩包","banner.description":"简单易用的vue图片裁剪插件，支持移动图像，裁剪图片，放大缩小图片，上下左右移动，固定比例，固定尺寸，远程图片裁剪","block1.title1":"使用简单","block1.title2":"方便快捷","block1.title3":"只需以下几个步骤","block1.title4":"安装","block1.title5":"引入","block1.title6":"注册组件","block1.title7":"编写代码","block1.title8":"处理返回结果","block2.title1":"在线配置","block2.title2":"预览并生成代码","block2.title3":"使用此工具配置并生成代码","block3.title1":"远程图片地址","block3.title2":"选择本地图片","block3.title3":"裁剪远程图片","block3.title4":"裁剪远程图片","block3.title5":"确定","block3.title6":"重置","block3.title7":"下载图片","block3.title8":"预览区域","block3.title9":"选择本地图片","donation.title1":"捐赠","donation.title2":"捐赠以支持作者","donation.title3":"请我喝杯咖啡吧 :)","config.title":"模式","config.nineCut":"九宫格模式","config.normalCut":"自由模式","config.label":"按钮文字","config.boxWidth":"裁剪组件宽度","config.boxHeight":"裁剪组件高度","config.cutWidth":"选择框宽度","config.cutHeight":"选择框高度","config.rate":"宽高比","config.toolBgc":"工具栏背景色","config.crossOriginHeader":"跨域header头","config.crossOrigin":"是否跨域","config.isModal":"是否为弹窗","config.showChooseBtn":"显示选择图片按钮","config.lockScroll":"锁定滚动","config.sizeChange":"允许改变大小","config.moveAble":"允许拖动裁剪框","config.tool":"显示工具栏","config.originalGraph":"原图裁剪","config.saveCutPosition":"保存裁剪框位置","config.scaleAble":"允许缩放图片","config.imgMove":"允许移动图片","config.fileType":"返回文件类型","config.index":"随结果一起返回，用于区分是那个裁剪组件返回的","config.smallToUpload":"如果选择的图片尺寸小于裁剪框尺寸，直接返回结果。 sizeChange必须为false","config.toolBoxOverflow":"允许裁剪框超出图片边界","config.previewMode":"实时返回裁剪结果","config.WatermarkText":"水印文字","config.WatermarkTextFont":"水印文字样式","config.WatermarkTextColor":"水印文字颜色","config.WatermarkTextX":"水印x轴位置","config.WatermarkTextY":"水印y轴位置","config.quality":"图片质量"},bt={"introduce.docs":"Docs","introduce.gitee":"Gitee","introduce.github":"Github","introduce.npm":"Npm","introduce.download":"Download","introduce.homepage":"Home page","banner.download":"Download zip","banner.description":"A image crop plug-in for Vue,you can use it to rotate、zoom images and cut any size","block1.title1":"Easy to use","block1.title2":"Increase of efficiency","block1.title3":"You can use it in a few simple steps","block1.title4":"Install","block1.title5":"Import","block1.title6":"Register","block1.title7":"Code","block1.title8":"Return","block2.title1":"Online configuration","block2.title2":"Preview and generate code","block2.title3":"Use this tool to preview and generate code.","block3.title1":"Remote pictures src","block3.title2":"Crop local pictures","block3.title3":"Crop remote pictures","block3.title4":"Crop remote pictures(For IE9)","block3.title5":"Confirm","block3.title6":"Reset","block3.title7":"Download picture","block3.title8":"Cut it out and show it here","block3.title9":"Choose picture","donation.title1":"Donation","donation.title2":"Donate in support of the author","donation.title3":"Can you buy me a cup of coffee :)","config.title":"Config tool","config.label":"Button text","config.boxWidth":"Tool width","config.boxHeight":"Tool height","config.cutWidth":"Selection box width","config.cutHeight":"Selection box height","config.rate":"Aspect ratio","config.toolBgc":"Toolbar background color","config.crossOriginHeader":"Cross origin header","config.crossOrigin":"Is cross origin","config.isModal":"Is modal","config.showChooseBtn":"Show select button","config.lockScroll":"Lock scroll","config.sizeChange":"Allow to change size","config.moveAble":"Allow to remove crop box","config.tool":"Show toolbar","config.originalGraph":"Crop original image","config.saveCutPosition":"Save cut position","config.scaleAble":"Allow scale image","config.imgMove":"Allow move image","config.fileType":"Return file type","config.index":"Return result with index","config.smallToUpload":"If choose image size less then defined Size,return file. sizeChange must be false","config.toolBoxOverflow":"Allow tool box out of picture range","config.previewMode":"Return results at any time","config.WatermarkText":"Watermark text","config.WatermarkTextFont":"Watermark size","config.WatermarkTextColor":"Watermark color","config.WatermarkTextX":"Watermark position x","config.WatermarkTextY":"Watermark position Y","config.quality":"Quality"},xt=Object(n["createI18n"])({locale:"zh-CN",messages:{"en-US":bt,"zh-CN":pt}}),ft=Object(r["createApp"])(ut);ft.use(xt).use(i["a"]),ft.mount("#app"),ft.config.globalProperties.$t=n["useI18n"],ft.config.globalProperties.i18n=xt},9224:function(t){t.exports=JSON.parse('{"name":"vue-img-cutter","version":"3.0.3","description":"A image crop plug-in for Vue,you can use it to rotate、zoom images and cut any size","author":"acccccccb <tabzhang@foxmail.com>","private":false,"scripts":{"serve":"set NODE_OPTIONS=--openssl-legacy-provider && vue-cli-service serve","build":"set NODE_OPTIONS=--openssl-legacy-provider && vue-cli-service build","lint":"vue-cli-service lint"},"dependencies":{"core-js":"^3.20.3","element-plus":"^2.3.9","vue":"^3.2.29","vue-i18n":"^9.1.10"},"devDependencies":{"@vue/cli-plugin-babel":"~4.5.15","@vue/cli-plugin-eslint":"~4.5.15","@vue/cli-service":"~4.5.15","@vue/compiler-sfc":"^3.2.29","babel-eslint":"^10.1.0","eslint":"^6.8.0","eslint-plugin-vue":"^7.20.0"},"main":"./src/index.js","repository":{"type":"git","url":"git+https://github.com/acccccccb/vue-img-cutter.git"},"keywords":["image","crop","cutter","vue","裁剪"],"license":"Apache2.0","bugs":{"url":"https://github.com/acccccccb/vue-img-cutter/issues"},"homepage":"https://ihtmlcss.com/demo/dist/#/croptool","eslintConfig":{"root":true,"env":{"node":true},"extends":["plugin:vue/vue3-essential","eslint:recommended"],"parserOptions":{"parser":"babel-eslint"},"rules":{}},"browserslist":["> 1%","last 2 versions","not dead"]}')},b0ca:function(t,e,o){},d64a:function(t,e,o){"use strict";o("3207")}});
//# sourceMappingURL=app.465d3b55.js.map